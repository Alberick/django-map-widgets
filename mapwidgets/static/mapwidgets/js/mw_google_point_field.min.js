!function(e){DjangoGooglePointFieldWidget=DjangoMapWidgetBase.extend({initializeMap:function(){var t=this.mapCenterLocation;if(this.mapCenterLocationName){var a=new google.maps.Geocoder;a.geocode({address:this.mapCenterLocationName},function(a,o){if(o==google.maps.GeocoderStatus.OK){var i=a[0].geometry.location;t=[i.lat(),i.lng()]}else console.warn("Cannot find "+this.mapCenterLocationName+" on google geo service.");this.map=new google.maps.Map(this.mapElement,{center:new google.maps.LatLng(t[0],t[1]),scrollwheel:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT},zoom:this.zoom}),e.isEmptyObject(this.locationFieldValue)||(this.updateLocationInput(this.locationFieldValue.lat,this.locationFieldValue.lng),this.fitBoundMarker())}.bind(this))}else this.map=new google.maps.Map(this.mapElement,{center:new google.maps.LatLng(t[0],t[1]),scrollwheel:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT},zoom:this.zoom}),e.isEmptyObject(this.locationFieldValue)||(this.updateLocationInput(this.locationFieldValue.lat,this.locationFieldValue.lng),this.fitBoundMarker())},addMarkerToMap:function(e,t){this.removeMarker();var a={lat:parseFloat(e),lng:parseFloat(t)};this.marker=new google.maps.Marker({position:a,map:this.map,draggable:!0}),this.marker.addListener("dragend",this.dragMarker.bind(this))},fitBoundMarker:function(){var e=new google.maps.LatLngBounds;e.extend(this.marker.getPosition()),this.map.fitBounds(e);var t=google.maps.event.addListener(this.map,"bounds_changed",function(){this.getZoom()>15&&this.setZoom(15),google.maps.event.removeListener(t)})},removeMarker:function(e){this.marker&&this.marker.setMap(null)},dragMarker:function(e){this.updateLocationInput(e.latLng.lat(),e.latLng.lng())},handleAddMarkerBtnClick:function(t){e(this.mapElement).toggleClass("click"),this.addMarkerBtn.toggleClass("active"),e(this.addMarkerBtn).hasClass("active")?this.map.addListener("click",this.handleMapClick.bind(this)):google.maps.event.clearListeners(this.map,"click")},handleMapClick:function(t){google.maps.event.clearListeners(this.map,"click"),e(this.mapElement).removeClass("click"),this.addMarkerBtn.removeClass("active"),this.updateLocationInput(t.latLng.lat(),t.latLng.lng())}})}(jQuery||django.jQuery);