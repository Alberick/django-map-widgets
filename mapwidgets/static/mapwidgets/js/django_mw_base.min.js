!function(a){DjangoMapWidgetBase=a.Class.extend({init:function(b){a.extend(this,b),this.coordinatesOverlayToggleBtn.on("click",this.toggleCoordinatesOverlay.bind(this)),this.coordinatesOverlayDoneBtn.on("click",this.handleCoordinatesOverlayDoneBtnClick.bind(this)),this.coordinatesOverlayInputs.on("change",this.handleCoordinatesInputsChange.bind(this)),this.addMarkerBtn.on("click",this.handleAddMarkerBtnClick.bind(this)),this.myLocationBtn.on("click",this.handleMyLocationBtnClick.bind(this)),this.deleteBtn.on("click",this.deleteMarker.bind(this));var c=new google.maps.places.Autocomplete(this.addressAutoCompleteInput);google.maps.event.addListener(c,"place_changed",this.handleAutoCompletePlaceChange.bind(this,c)),google.maps.event.addDomListener(this.addressAutoCompleteInput,"keydown",this.handleAutoCompleteInputKeyDown.bind(this)),this.initializeMap()},initializeMap:function(){console.warn("Implement initializeMap method.")},updateMap:function(a,b){console.warn("Implement updateMap method.")},addMarkerToMap:function(a,b){console.warn("Implement this method for your map js library.")},fitBoundMarker:function(){console.warn("Implement this method for your map js library.")},removeMarker:function(){console.warn("Implement this method for your map js library.")},dragMarker:function(a){console.warn("Implement dragMarker method.")},handleMapClick:function(a){console.warn("Implement handleMapClick method.")},handleAddMarkerBtnClick:function(a){console.warn("Implement handleAddMarkerBtnClick method.")},getLocationValues:function(){var a=this.locationInput.val().split(" "),b=a[2].replace(/[\(\)]/g,""),c=a[1].replace(/[\(\)]/g,"");return{lat:b,lng:c}},updateLocationInput:function(b,c){this.showOverlay();var d="POINT ("+c+" "+b+")";this.locationInput.val(d),this.updateCoordinatesInputs(b,c),this.addMarkerToMap(b,c),this.locationFieldValue={lng:c,lat:b},this.deleteBtn.removeClass("btn-default disabled").addClass("btn-danger"),this.hideOverlay(),a(document).trigger("point_map_widget:marker_create",[this.locationInput,b,c])},toggleCoordinatesOverlay:function(){this.coordinatesOverlayToggleBtn.toggleClass("active"),a(".mw-coordinates-overlay",this.wrapElemSelector).toggleClass("hide")},updateCoordinatesInputs:function(b,c){a(".mw-overlay-latitude",this.wrapElemSelector).val(b||""),a(".mw-overlay-longitude",this.wrapElemSelector).val(c||"")},handleCoordinatesInputsChange:function(b){var c=a(".mw-overlay-latitude",this.wrapElemSelector).val(),d=a(".mw-overlay-longitude",this.wrapElemSelector).val();c&&d&&(this.updateLocationInput(c,d),this.fitBoundMarker())},handleCoordinatesOverlayDoneBtnClick:function(){a(".mw-coordinates-overlay",this.wrapElemSelector).addClass("hide")},handleMyLocationBtnClick:function(){this.showOverlay(),navigator.geolocation?navigator.geolocation.getCurrentPosition(this.handleCurrentPosition.bind(this),this.handlecurrentPositionError.bind(this)):this.handlecurrentPositionError()},handleCurrentPosition:function(a){this.updateLocationInput(a.coords.latitude,a.coords.longitude),this.fitBoundMarker()},handlecurrentPositionError:function(){this.hideOverlay(),alert("Your location could not be found.")},handleAutoCompleteInputKeyDown:function(a){13==a.keyCode&&a.preventDefault()},handleAutoCompletePlaceChange:function(a){var b=a.getPlace(),c=b.geometry.location.lat(),d=b.geometry.location.lng();this.updateLocationInput(c,d),this.fitBoundMarker()},deleteMarker:function(){a.isEmptyObject(this.locationFieldValue)||(console.log(this.locationFieldValue),this.hideOverlay(),this.locationInput.val(""),this.coordinatesOverlayInputs.val(""),this.removeMarker(),this.deleteBtn.removeClass("btn-danger").addClass("btn-default disabled"),a(document).trigger("point_map_widget:marker_delete",[this.locationInput,this.locationFieldValue.lat,this.locationFieldValue.lng]),this.locationFieldValue=null)},showOverlay:function(){this.loaderOverlayElem.removeClass("hide")},hideOverlay:function(){this.loaderOverlayElem.addClass("hide")}})}(jQuery||django.jQuery);